# First install these
- docker -https://docs.docker.com/get-docker/

- Kubectl installation from https://www.coachdevops.com/2020/10/install-kubectl-on-ubuntu-instance-how.html
    -curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
    -sudo touch /etc/apt/sources.list.d/kubernetes.list
    -echo "deb http://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee -a /etc/apt/sources.list.d/kubernetes.list
    -sudo apt-get update
    -sudo apt-get install -y kubectl

- AWS CLI
    -https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html
        -curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
        -unzip awscliv2.zip
        -sudo ./aws/install
        -unzip awscliv2.zip
        -sudo ./aws/install
        -./aws/install -i /usr/local/aws-cli -b /usr/local/bin

    -https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html

- Aws IAM authenticator -https://docs.aws.amazon.com/eks/latest/userguide/install-aws-iam-authenticator.html
    -curl -o aws-iam-authenticator https://amazon-eks.s3.us-west-2.amazonaws.com/1.21.2/2021-07-05/bin/linux/amd64/aws-iam-authenticator
    -chmod +x ./aws-iam-authenticator
    -mkdir .is
    -cp ./aws-iam-authenticator $HOME/.aws-iam-authenticator
    -echo 'export PATH=$PATH:$HOME/.is' >> ~/.bashrc
    -aws-iam-authenticator help

- eksctl -https://github.com/weaveworks/eksctl
    -curl --silent --location "https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz" | tar xz -C /tmp
    -sudo mv /tmp/eksctl /usr/local/bin


# dockerhub
create a dockerhub account
create a dockerhub repository, name it pkim23gmu/hw2

# docker
docker login --username=pkim23gmu
docker build -t hw2 .
docker push pkim23gmu/hw2

docker run -p 8080:8080 pkim23gmu/hw2

# log into aws console and create a user with administrator access and download the new_user_credentials.csv

aws ecr create-repository --repository-name hw2 --region us-east-1
aws ecr get-login-password --region us-east-1 > ecr_pass.txt

cat ecr_pass.txt | docker login -u AWS --password-stdin 800617640166.dkr.ecr.us-east-1.amazonaws.com/hw2

docker tag hw2:latest 800617640166.dkr.ecr.us-east-1.amazonaws.com/hw2:latest
docker push 800617640166.dkr.ecr.us-east-1.amazonaws.com/hw2:latest

inspired from https://www.bluematador.com/blog/my-first-kubernetes-cluster-a-review-of-amazon-eks


https://amazon-eks.s3-us-west-2.amazonaws.com/cloudformation/2019-01-09/amazon-eks-vpc-sample.yaml

## Create our cluster on EKS
eksctl create cluster -f cluster.yaml

## Create our deployment
kubectl apply -f deployment.yaml

## Create service
kubectl apply -f service.yaml

## service created
kubectl get services

##  pods of our application are running.
kubectl get pods -o wide

## get nodes command
kubectl get nodes -o wide


kubectl delete all --all

































